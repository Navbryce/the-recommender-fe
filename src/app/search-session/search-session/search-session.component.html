<div *ngIf="!!currentSession" class="recommendation-session-wrapper full">
  <mat-drawer-container
    *ngIf="!currentSession.acceptedRecommendation"
    class="full"
  >
    <mat-drawer mode="side" #drawer>
      <div
        *ngFor="let recommendation of currentSession.maybeRecommendations"
        style="box-sizing: border-box; padding: 50px;"
      >
        <div
          class="recommended-business"
          [style.width.px]="VIEW_CONFIG.cardWidth"
        >
          <app-recommendation-card
            [recommendation]="recommendation"
            (onAction)="onMaybeRecommendationAction($event)"
            [disableReconsider]="true"
          >
          </app-recommendation-card>
        </div>
      </div>
    </mat-drawer>
    <mat-drawer-content>
      <div style="position: absolute; bottom: 50vh; top: 50vh; z-index: 2;">
        <button
          mat-stroked-button
          color="accent"
          (click)="drawer.toggle()"
          [disabled]="currentSession.maybeRecommendations.length == 0"
        >
          <mat-icon style="display: inline; vertical-align: middle;"
            >repeat
          </mat-icon>
          <p
            style="padding-left: 5px; display: inline; vertical-align: middle;"
          >
            Reconsider
          </p>
        </button>
      </div>
      <div class="full" fxLayout="column" fxLayoutAlign="center center">
        <div
          *ngIf="currentSession"
          [style.width.px]="VIEW_CONFIG.cardWidth"
          class="recommended-business"
        >
          <div
            *ngIf="loadingRecommendation"
            class="full loading-wrapper"
            fxLayout="row"
            fxLayoutAlign="center center"
          >
            <div>
              <mat-spinner></mat-spinner>
            </div>
          </div>
          <app-recommendation-card
            *ngIf="currentRecommendation"
            class="full-width"
            [recommendation]="currentRecommendation"
            (onAction)="onCurrentRecommendationAction($event)"
          ></app-recommendation-card>
          <mat-card *ngIf="!currentRecommendation" class="full-width">
            <mat-card-title>No current recommendation</mat-card-title>
            <div
              mat-card-image
              [style.height.ptx]="VIEW_CONFIG.cardImageHeight"
              fxLayout="column"
              fxLayoutAlign="center center"
            >
              <mat-icon
                style="font-size: 100px; height: auto; width: auto;"
                color="accent"
                fxFlexAlign="center"
                >priority_high
              </mat-icon>
            </div>
            <mat-card-content
              >Look at maybe recommendations or restart search
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
  <div *ngIf="!!currentSession.acceptedRecommendation" class="full">
    <app-session-summary [session]="currentSession"></app-session-summary>
  </div>
</div>
